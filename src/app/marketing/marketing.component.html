<div fxLayout="column" fxLayoutWrap="wrap" fxLayoutAlign="space-around">
  <div fxFlex="100%" fxLayout="column">
    <mat-card class="topbanner">
      <mat-card-content>
        <div class="selectrelation" fxFlex fxShow.xs="false">
          <mat-form-field class="example-full-width">
            <input type="text" placeholder="Select Relation" aria-label="relation" matInput [formControl]="myControl"
              [matAutocomplete]="auto" />
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
              <mat-option *ngFor="let option of filteredOptions | async; let i = index" [value]="option"
                (selectionChange)="onSelectRelation(option, i)">
                {{ option.relationname }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Publications_______________________________ -->

  <mat-tab-group fxLayout="column" fxLayoutWrap="wrap" fxFlexAlign="start" class="relations"
    [selectedIndex]="selectedIndex">
    <mat-tab fxFlex="100%" label="New Publications"  class="relations">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>text_format</mat-icon>
        <div fxShow.xs="false">Publications</div>
      </ng-template>

      <app-marketingpublications [Account]="Account" [SelectedRelation]="SelectedRelation" [option]="option">
        </app-marketingpublications>


    </mat-tab>

    <!-- TRANSLATIONS________________________________________ -->
    <mat-tab label="Translations">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>public</mat-icon>
        <div fxShow.xs="false">Translations</div>
      </ng-template>
      <div class="addtobutton">
        <button mat-fab color="primary" matTooltip="Create new Translation Job" (click)="newTranslationItem()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <div class="tabcontainer" fxLayout="row">
        <div class="listcontainer" fxFlex="20%" fxLayout="column">
          <h4>Search</h4>
          <p>
            <mat-form-field>
              <!-- (keyup.enter)="searchGo(searchTerm.value)" -->
              <input matInput #searchTerm id="seach-box" 
                placeholder="Name/Address" />
            </mat-form-field>
          </p>
          <p>{{ this.errorMessage }}</p>

          <!-- (click)="searchGo(searchTerm.value)" -->
          <button a mat-raised-button color="primary" >
            <mat-icon>search</mat-icon>Search
          </button>

          <button a mat-raised-button (click)="getTranslations()">
            Show All
          </button>

          <div class="listview">
            <div *ngFor="let Translation of Translation" (click)="onSelectTranslation(Translation)"
              [class.selected]="Translation === selectedTranslation">
              <span class="boxtranslation">
                <tr>
                  <td>
                    {{ Translation.paymentreceived }}
                  </td>
                  <td>
                    {{ Translation.amount }}
                  </td>
                </tr>
                <tr></tr>
              </span>
            </div>
          </div>
          <button mat-mini-fab color="primary" (click)="openDialogDeleteTranslation()">
            <mat-icon>delete</mat-icon>
          </button>
        </div>

        <div *ngIf="selectedTranslation" class="relationcontainer" fxFlex="80%">
          <div *ngIf="showconfirmation">
            <mat-card>
              <label *ngIf="selectedTranslation.paymentreceived === 'paid'" style="color:green">Payment Received,
                invoice send to your email or under your
                account under invoices
              </label>
              <label *ngIf="selectedTranslation.paymentreceived === 'expired'" style="color:red">Payment expired please
                try again</label>
              <label *ngIf="selectedTranslation.paymentreceived === 'failed'" style="color:red">Payment failed please
                try again or use other method of payment
                method</label>
              <label *ngIf="selectedTranslation.paymentreceived === 'cancelled'" style="color:red">Payment
                cancelled</label>
            </mat-card>
          </div>

          <div *ngIf="selectedTranslation.paymentreceived !== 'paid'">
            <div *ngFor="let Translationjob of Translationjob" (click)="onSelectTranslationJob(Translationjob)">
              <mat-card>
                <table class="form-full-width" cellspacing="0">
                  <!-- <mat-toolbar color="primary" class="titlebox">
                  <div>
                    <h2>{{ Translationjob.title }} {{Translationjob.language | uppercase}}</h2>
                  </div>
                </mat-toolbar> -->
                  <tr>
                    <td>
                      <mat-form-field class="form-full-width">
                        <input matInput [(ngModel)]="Translationjob.title" placeholder="Item Title"
                          class="InputField" />
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class="form-full-width">
                        <!-- disabled value no options yet for non english -->
                        <input matInput [(ngModel)]="Translationjob.language" placeholder="Input Language, English"
                          disabled value="en" class="InputField" />
                      </mat-form-field>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <mat-form-field class="form-full-width">
                        <mat-select [(ngModel)]="Translationjob.lc_tgt" placeholder="Target Language"
                          class="InputField">
                          <mat-option *ngFor="let language of languages" [value]="language.lc_tgt">
                            {{ language.lc_tgt }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </td>
                    <td>
                      <mat-form-field class="form-full-width">
                        <!-- dropdown standard or pro -->
                        <mat-select [(ngModel)]="Translationjob.tier" placeholder="Tier" class="InputField">
                          <mat-option value="standard">Standard Translation</mat-option>
                          <mat-option value="pro">Professional Translation</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </td>
                  </tr>

                  <tr rowSpan="6">
                    <td colspan="2">
                      <mat-form-field class="form-full-width">
                        <textarea matInput [(ngModel)]="Translationjob.body_src" placeholder="Content"
                          class="InputField"></textarea>
                      </mat-form-field>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <mat-form-field class="form-full-width">
                        <textarea matInput [(ngModel)]="Translationjob.comment"
                          placeholder="instructions for translator" class="InputField"></textarea>
                      </mat-form-field>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      {{ Translationjob.status }}
                    </td>
                  </tr>
                  <tr>
                    <button a mat-raised-button (click)="saveTranslationJob(Translationjob)">
                      Save
                    </button>
                  </tr>
                </table>

                <button mat-mini-fab color="primary" (click)="openDialogDeleteTranslationJob()">
                  <mat-icon>delete</mat-icon>
                </button>
              </mat-card>
            </div>
          </div>

          <div *ngIf="selectedTranslation.paymentreceived === 'paid'">
            <div *ngFor="let Translationjob of Translationjob; let i = index">
              <mat-card style="margin: 10px 10px 40px 10px;">
                <table>
                  <tr>
                    <td>
                      <label>{{ Translationjob.lc_tgt }}</label>
                    </td>
                    <td>
                      <label>{{ Translationjob.status }}</label>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label>{{
                        Translationjob.body_tgt | slice: 0:200
                      }}</label>
                    </td>
                  </tr>
                </table>

                <div class="add-button">
                  <a class="sub-button tl" (click)="newpublication(i)" matTooltip="Copy to publication">
                    <mat-icon>publish</mat-icon>
                  </a>
                  <a class="sub-button tr" (click)="newwebsite(i)" matTooltip="Copy to Website">
                    <mat-icon>web</mat-icon>
                  </a>
                  <a class="sub-button bl" (click)="newmailcampaign(i)" matTooltip="Copy to Email campaign">
                    <mat-icon>email</mat-icon>
                  </a>
                  <a class="sub-button br" (click)="newsocialmedia(i)" matTooltip="Copy to Social Media ">
                    <mat-icon>share</mat-icon>
                  </a>
                </div>
              </mat-card>
            </div>
          </div>

          <div>
            <table>
              <tr>
                <button class="addtranslationbutton" mat-mini-fab color="primary" (click)="createTranslationJob()">
                  <mat-icon>add</mat-icon>
                </button>
              </tr>
              <tr>
                <button a mat-raised-button (click)="opendialogconfirmpayment()">
                  Request Translation
                </button>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </mat-tab>

    <!-- Mailing tab _____________________________ -->

    <mat-tab class="tabmenu" label="Mailing" fxFlex="100%" fxFlexAlign="start" label="New Publications">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>email</mat-icon>
        <div fxShow.xs="false">Mailing/Newsletters</div>
      </ng-template>

      <div class="tabcontainer" fxLayout="column">
        <mat-button-toggle-group style="width: 300px; margin-top: 10px;" fxFlex="3 3 40px" fxFlexAlign="start"
          #group="matButtonToggleGroup" [vertical]="false" fxflex>
          <mat-button-toggle style="width: 25%" matTooltip="Campaigns" value="campaign" (click)="getMailingCampaign()">
            <mat-icon>today</mat-icon>
          </mat-button-toggle>
          <mat-button-toggle style="width: 25%" matTooltip="Mailing List" value="maillist">
            <mat-icon>list</mat-icon>
          </mat-button-toggle>
          <mat-button-toggle style="width: 25%" matTooltip="Templates" value="mailing" (click)="getMailing()">
            <mat-icon>rate_review</mat-icon>
          </mat-button-toggle>
          <mat-button-toggle style="width: 25%" matTooltip="Templates Editor" value="maileditor">
            <mat-icon>edit</mat-icon>
          </mat-button-toggle>
        </mat-button-toggle-group>

        <div fxLayout="column" style="width: 100%;" fxFlex>
          <div fxFlexOffset="10px" fxLayout="row" class="bottomlist" *ngIf="group.value == 'mailing'">

            <div class="addtobutton">
              <button mat-fab color="primary" matTooltip="Upload to or create Multiple Lists" (click)="createMailing()">
                <mat-icon>add</mat-icon>
              </button>
            </div>

            <div fxFlex="25% " class="Relations" fxLayout="column">
              <button a mat-raised-button color="primary" (click)="searchGoMailing(searchTerm.value)">
                <mat-icon>search</mat-icon>Search Result
              </button>

              <button a mat-raised-button (click)="getMailing()">
                Show All
              </button>
              <div class="listview">

                <div *ngFor="let Mailing of Mailing" (click)="onSelectMailing(Mailing)"
                  [class.selected]="Mailing === selectedMailing">
                  <span class="boxmailing">
                    <table>
                      <tr style="height: 30px; vertical-align: middle;">
                        <td class="selectionboxmailing">
                          <div [class.sendtrue]="Mailing.send === true" [class.sendfalse]="Mailing.send === false">
                          </div>
                        </td>
                        <td *ngIf="Mailing.mailinglist">
                          {{ Mailing.title | slice: 0:30 }}
                        </td>
                      </tr>
                      <tr style="height: 30px; vertical-align: middle;">
                        <td colspan="3" class="selectionboxmailing80">
                          {{ Mailing.date | date }}
                        </td>
                        <td *ngIf="Mailing.scheduled" class="selectionboxmailing">
                            <mat-icon >schedule</mat-icon>
                          </td>
                      </tr>
                    </table>
                  </span>
                </div>
              </div>
            </div>

            <div fxFlex="75%" fxLayout="column" class="relationcontainer"
              *ngIf="selectedMailing && group.value == 'mailing'">
              <mat-card>
                <mat-card-content>
                  <table class="mailingform">
                    <tr>
                      <th colspan="2">
                        <mat-toolbar color="primary" class="titlebox">
                          <h2>
                            {{
                              selectedMailing.subject | uppercase | slice: 0:30
                            }}
                          </h2>

                          <button mat-icon-button [matMenuTriggerFor]="menucall" class="menu">
                            <mat-icon>more_vert</mat-icon>
                          </button>
                          <mat-menu #menucall="matMenu">
                            <button mat-menu-item (click)="openDialogDeleteMailing()">
                              <mat-icon>delete</mat-icon>
                              <span>Delete</span>
                            </button>
                            <button mat-menu-item (click)="createMailing()">
                              <mat-icon>note_add</mat-icon>
                              <span>New</span>
                            </button>
                            <button mat-menu-item (click)="randomizeMailing()">
                              <mat-icon>merge_type</mat-icon>
                              <span>Add to campaign</span>
                            </button>
                            <button *ngIf="!this.selectedMailing.templatearray" mat-menu-item (click)="editMailing()"
                              disabled>
                              <mat-icon>edit</mat-icon>
                              <span>Edit in Maileditor</span>
                            </button>
                            <button (click)="group.value = 'maileditor'" *ngIf="this.selectedMailing.templatearray"
                              mat-menu-item (click)="editMailing()">
                              <mat-icon>edit</mat-icon>
                              <span>Edit in Maileditor</span>
                            </button>
                          </mat-menu>
                        </mat-toolbar>
                      </th>
                    </tr>

                    <tr>
                      <td>
                        <mat-form-field class="form-full-width">
                          <input matInput [(ngModel)]="selectedMailing.subject" placeholder="Subject"
                            class="InputField" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field class="form-full-width">
                          <input matInput [(ngModel)]="selectedMailing.title" placeholder="Custom Titel/ID"
                            class="InputField" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-chip-list #chipList>
                          <mat-chip color="primary" *ngFor="let item of selectedItems; let i = index">
                            {{ item }}
                            <mat-icon matChipRemove (click)="onRemoveItemsMailing(item, i)">cancel</mat-icon>
                          </mat-chip>
                          <!-- [(mailingaddresscampaign)] -->
                          <input matInput (keydown.enter)="onAddItemManual($event)"
                            placeholder="Type and Select mailinglist" [matChipInputFor]="chipList"
                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="true"
                            [matAutocomplete]="maillists" [formControl]="addItems" #chipInput />
                          <mat-autocomplete #maillists="matAutocomplete" (optionSelected)="onAddItemsMailing($event)">
                            <mat-option *ngFor="
                                let mailingaddress of filteredItems | async
                              " [value]="mailingaddress">
                              <span>{{ mailingaddress.listname }} |
                                {{ mailingaddresscampaign.industry }}</span>
                            </mat-option>
                          </mat-autocomplete>
                        </mat-chip-list>
                      </td>
                      <td>
                        <mat-form-field class="form-full-width">
                          <input matInput [(ngModel)]="selectedMailing.from" placeholder="from@email.com"
                            class="InputField" />
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <br />
                  <a href="https://www.mail-tester.com" target="_blank">Check spam rating</a>
                  <br />

                  <mat-expansion-panel class="max-expansion-panel">
                    <mat-expansion-panel-header>
                      <mat-panel-title class="mat-expansion-panel-header-title">
                        Schedule Mailing
                      </mat-panel-title>
                      <mat-panel-description>
                        Schedule when your mail should be send
                        <mat-icon>schedule</mat-icon>
                      </mat-panel-description>
                    </mat-expansion-panel-header>
                    <table class="max-table-content">
                      <tr>
                        <td>
                          <mat-form-field>
                            <input matInput [(ngModel)]="selectedMailing.time" placeholder="Time" class="InputField"
                              type="time" />
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <mat-select placeholder="Timezone" [(ngModel)]="selectedMailing.timezone">
                              <mat-option *ngFor="let timezone of timezones" [value]="timezone.value">
                                {{ timezone.value }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-datepicker #picker2 class="form-half-width"></mat-datepicker>
                          <input [min]="minDate" [max]="maxDate" [matDatepicker]="myDatepicker2"
                            [(ngModel)]="selectedMailing.date" placeholder="Send Date" />
                          <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
                          <mat-datepicker #myDatepicker2></mat-datepicker>
                        </td>
                      </tr>
                      <tr>
                          <button a mat-raised-button (click)="openDialogScheduleMailing()">
                              Schedule
                              <mat-icon>schedule</mat-icon>
                            </button>
                      </tr>
                    </table>
                  </mat-expansion-panel>
                  <table style="background-color: whitesmoke; margin: 20px 2px 20px 20px; padding:20px 2px 20px 20px; width: 90%">
                    <tr>
                      <td>
                        <mat-select placeholder="Copy from:" [(value)]="copyfrommailing">
                          <mat-option *ngFor="let Mailing of Mailing; let i = index" [value]="Mailing">
                            {{ Mailing.subject }} {{ Mailing.date }}
                          </mat-option>
                        </mat-select>
                      </td>
                      <td>
                        <button a mat-raised-button (click)="copyFromMailing()">
                          Copy
                          <mat-icon>copy</mat-icon>
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <button *ngIf="!selectedMailing.templatearray" a mat-raised-button (click)="addTextMailing()">
                            Add/Edit text mailing
                            <mat-icon>edit</mat-icon>
                          </button>
                        </td>
                    </tr>
                    <tr>
                      <mat-accordion>
                        <mat-expansion-panel>
                          <mat-expansion-panel-header>
                            <mat-panel-title>
                              Dynamic input
                            </mat-panel-title>
                          </mat-expansion-panel-header>
                          <div fxLayout="column" style="width: 200px;"
                            matTooltip="Click to copy, insert in text to retreive mailinglist information">
                            <label (mouseenter)="$event.stopImmediatePropagation()"
                              (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!"
                              #tooltip="matTooltip" (click)="tooltip.toggle()"
                              (click)="copyMessage('%recipient_name%')">%recipient_name%</label>
                            <label (mouseenter)="$event.stopImmediatePropagation()"
                              (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!"
                              #tooltip="matTooltip" (click)="tooltip.toggle()"
                              (click)="copyMessage('%recipient.company%')">%recipient.company%</label>
                            <label (mouseenter)="$event.stopImmediatePropagation()"
                              (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!"
                              #tooltip="matTooltip" (click)="tooltip.toggle()"
                              (click)="copyMessage('%recipient%')">%recipient%</label>
                            <label (mouseenter)="$event.stopImmediatePropagation()"
                              (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!"
                              #tooltip="matTooltip" (click)="tooltip.toggle()"
                              (click)="copyMessage('%recipient.firstname%')">%recipient.firstname%</label>
                            <label (mouseenter)="$event.stopImmediatePropagation()"
                              (mouseleave)="$event.stopImmediatePropagation()" matTooltip="Copied!"
                              #tooltip="matTooltip" (click)="tooltip.toggle()"
                              (click)="copyMessage('%recipient.lastname%')">%recipient.lastname%</label>
                          </div>
                        </mat-expansion-panel>
                      </mat-accordion>

                    </tr>
                  </table>
                  <!-- uploadUrl: 'http://localhost:3000/api/Containers/5af0573e196178122c6bb4a4/upload/', -->
                  <!-- <div *ngIf="selectedMailing.done == true">
                    <ckeditor #content [name]="editor1" [(ngModel)]="selectedMailing.html" [config]="{
                  extraPlugins: 'filebrowser,popup,filetools',
                  toolbarCanCollapse: 'true',
                  width: '100%',
                  height: '600px',
                  toolbarStartupExpanded: 'false'}" (fileUploadResponse)="onRequestCkEvent($event)" debounce="500">
                    </ckeditor>

                  </div> -->

                  <!-- <table *ngIf="selectedMailing.done == true" class="max-table-content">
                    <tr rowspan="10">
                      <td colspan="3">

                      </td>
                    </tr>
                    <tr>
                      <td colspan="3">
                        <label (click)="toggleTextView()">show plain text</label>
                      </td>

                    </tr>
                    <tr *ngIf="toggletextview" rowspan="10">
                      <td colspan="3">
                        <mat-form-field class="content-form">
                          <textarea matInput class="content-form" #content [(ngModel)]="selectedMailing.text"
                            placeholder="content">Text Version</textarea>
                          <mat-hint align="end">{{content.value.length}}</mat-hint>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table> -->
                  <br />
                  <mat-checkbox [(ngModel)]="selectedMailing.send">
                    Send
                  </mat-checkbox>
                  <button a mat-raised-button (click)="saveMailing('save')">
                    Save
                    <mat-icon>save</mat-icon>
                  </button>
                  <button a mat-raised-button (click)="sendMailing()">
                    Send
                    <mat-icon>send</mat-icon>
                  </button>
                  <button a mat-raised-button (click)="showTemplatePreview()">
                    Preview
                    <mat-icon>view</mat-icon>
                  </button>

                  <br />

                  <div *ngIf="selectedMailing.send">
                    <table style="margin: 20px 0px 40px 0px" class="max-table-content">
                      <tr>
                        <td style="width: 25%;">
                          <label>Opened </label>
                        </td>
                        <td style="width: 25%;">
                          <label>Clicked </label>
                        </td>
                        <td style="width: 25%;">
                          <label>Bounced</label>
                        </td>
                        <td style="width: 25%;">
                          <label>Unsubscribed</label>
                        </td>
                      </tr>
                      <tr>
                        <td style="width: 25%;">
                          {{ selectedMailing.totalopened }}
                        </td>
                        <td style="width: 25%;">
                          {{ selectedMailing.totalclicked }}
                        </td>
                        <td style="width: 25%;">
                          {{ selectedMailing.totalbounced }}
                        </td>
                        <td style="width: 25%;">
                          {{ selectedMailing.totalunsubscribed }}
                        </td>
                      </tr>
                    </table>

                    <mat-expansion-panel class="max-expansion-panel">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          Website Statistics
                        </mat-panel-title>
                        <mat-panel-description>
                          Select your account to get Mailings website behavior
                          <mat-icon>insert_chart</mat-icon>
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <table class="max-table-content">
                        <tr>
                          <td>
                            <mat-form-field class="form-full-width">
                              <mat-select [(ngModel)]="selectedanalytics" placeholder="GA Account" class="InputField">
                                <mat-option *ngFor="
                                    let selectedanalytics of Googleanalytics
                                  " [value]="selectedanalytics">
                                  {{ selectedanalytics.name }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </td>
                          <td></td>
                          <td>
                            <button a mat-raised-button (click)="getAnalytics()">
                              Get Statistics
                              <mat-icon>insert_chart</mat-icon>
                            </button>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <label>Average Time on Website</label>
                          </td>
                          <label>Average Bounce Rate</label>
                          <td>
                            <label>Completed Goals</label>
                          </td>
                          <td>
                            <label>Page Views</label>
                          </td>
                        </tr>
                        <tr>
                          <td>{{ avgTimeOnPage | slice: 0:4 }} seconds</td>
                          {{
                            bounceRate | slice: 0:4
                          }}
                          %
                          <td>{{ goalStartsAll }} goals</td>
                          <td>{{ pageview | slice: 0:4 }} views</td>
                        </tr>
                      </table>
                    </mat-expansion-panel>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          </div>

          <div fxLayout="row" fxFlexOffset="10px" class="bottomlist" *ngIf="group.value == 'campaign'">

            <div class="addtobutton">
              <button mat-fab color="primary" matTooltip="Add Campaign" (click)="createMarketingPlannerevents()">
                <mat-icon>add</mat-icon>
              </button>
              <button mat-mini-fab color="primary" matTooltip="Delete Campaign"
                (click)="openDialogDeleteMailingCampaign()">
                <mat-icon>delete</mat-icon>
              </button>
            </div>

            <div fxFlex="25%" class="Relations" fxLayout="column">
              <mat-form-field>
                <input matInput [(ngModel)]="searchboxCampaign" (keyup.enter)="searchGoCampaign()" placeholder="Name" />
              </mat-form-field>
              <button a mat-raised-button color="primary" (click)="searchGoCampaign()">
                <mat-icon>search</mat-icon>Search
              </button>

              <button a mat-raised-button (click)="getMailingCampaign()">
                Show All
              </button>
              <div class="listview" fxLayout="column">

                <div *ngFor="let Marketingplannerevents of Marketingplannerevents" (click)="
                    onSelectMarketingplannerevents(Marketingplannerevents)
                  " [class.selected]="
                    Marketingplannerevents === selectedMarketingplannerevents
                  ">
                  <span class="box">
                    <tr>
                      <td style="width: 80px">
                        <mat-icon *ngIf="Marketingplannerevents.countsend > 0"
                          matBadge="{{ Marketingplannerevents.countsend }}" matBadgeColor="primary"
                          matBadgePosition="below after">mail</mat-icon>
                        <mat-icon *ngIf="Marketingplannerevents.countsend === 0">mail</mat-icon>
                        &nbsp;
                        <mat-icon *ngIf="Marketingplannerevents.countnotsend > 0"
                          matBadge="{{ Marketingplannerevents.countnotsend }}" matBadgeColor="primary"
                          matBadgePosition="below after">markunread_mailbox</mat-icon>
                        <mat-icon *ngIf="Marketingplannerevents.countnotsend === 0">markunread_mailbox</mat-icon>
                      </td>
                      <td style="font-size: 8pt;">
                        {{ Marketingplannerevents.name | slice: 0:26 }}
                      </td>
                    </tr>
                  </span>
                </div>
              </div>


            </div>

            <!-- Mailing Campaign  -->
            <div fxFlex="75%" fxLayout="column" class="relationcontainer" *ngIf="
                selectedMarketingplannerevents && group.value == 'campaign'
              ">
              <mat-card>
                <mat-card-content>
                  <table class="form-full-width">
                    <tr>
                      <th colspan="2">
                        <mat-toolbar color="primary" class="titlebox">
                          <h2>
                            {{
                              selectedMarketingplannerevents.name
                                | uppercase
                                | slice: 0:30
                            }}
                          </h2>
                          <button mat-icon-button [matMenuTriggerFor]="menucall" class="menu">
                            <mat-icon>more_vert</mat-icon>
                          </button>
                          <mat-menu #menucall="matMenu">
                            <button mat-menu-item (click)="openDialogDeleteMarketingplannerevents()">
                              <mat-icon>delete</mat-icon>
                              <span>Delete</span>
                            </button>
                            <button mat-menu-item (click)="createMarketingplannerevents()">
                              <mat-icon>note_add</mat-icon>
                              <span>New</span>
                            </button>
                          </mat-menu>
                        </mat-toolbar>
                      </th>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field class="form-full-width">
                          <input matInput [(ngModel)]="selectedMarketingplannerevents.name" placeholder="Name"
                            class="InputField" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-chip-list #chipList>
                          <mat-chip color="primary" *ngFor="let item of selectedItems; let i = index">
                            {{ item }}
                            <mat-icon matChipRemove (click)="onRemoveItems(item, i)">cancel</mat-icon>
                          </mat-chip>
                          <!-- [(mailingaddresscampaign)] -->
                          <input matInput placeholder="Type and Select mailinglist" [matChipInputFor]="chipList"
                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="true"
                            [matAutocomplete]="maillists" [formControl]="addItems" #chipInput />
                          <mat-autocomplete #maillists="matAutocomplete" (optionSelected)="onAddItems($event); (i)">
                            <mat-option *ngFor="
                                let mailingaddresscampaign of filteredItems
                                  | async
                              " [value]="mailingaddresscampaign">
                              <span>{{ mailingaddresscampaign.listname }} |
                                {{ mailingaddresscampaign.industry }}</span>
                            </mat-option>
                          </mat-autocomplete>
                        </mat-chip-list>
                      </td>
                      <td>
                        <button a mat-raised-button (click)="saveMailingCampaign()">
                          Save as Draft
                          <mat-icon>save</mat-icon>
                        </button>
                        <button a mat-raised-button (click)="openDialogDeleteMailingCampaign()">
                          Delete
                          <mat-icon>remove</mat-icon>
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field style="width: 200px">
                          <mat-select placeholder="select" [(ngModel)]="filtermailingselect"
                            (selectionChange)="getMailingCampaignMailings()">
                            <mat-option *ngFor="let filtermailingselect of filtermailing" [value]="filtermailingselect">
                              {{ filtermailingselect }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field class="form-full-width">
                          <textarea matInput matTextareaAutosize="true" matAutosizeMinRows="6"
                            [(ngModel)]="selectedMarketingplannerevents.notes" placeholder="Notes"
                            class="InputField"></textarea>
                        </mat-form-field>
                      </td>
                    </tr>
                  </table>

                  <br />
                  <div (blur)="saveMailingCampaign()">
                    <div *ngFor="
                        let CampaignMailing of CampaignMailing;
                        let i = index
                      ">
                      <a mat-mini-fab color="primary" *ngIf="toggleCampaignMailing[i] === false"
                        (click)="toggleCampaignMailingNow(i)" matTooltip="Expand Panel" [ngClass]="
                          togglecampaignclasstrans[i] === true
                            ? 'toggelcampaignwindowfade'
                            : 'toggelcampaignwindow'
                        ">
                        <mat-icon>aspect_ratio</mat-icon>
                      </a>
                      <mat-card *ngIf="toggleCampaignMailing[i] == false" [ngClass]="
                          togglecampaignclasstrans[i] == true
                            ? 'toggelcampaignwindowactive'
                            : 'quickcampaignmailing'
                        " [class.campmailingnotsend]="
                          CampaignMailing.scheduled &&
                          CampaignMailing.send === false
                        " [class.campmailingdone]="
                          CampaignMailing.scheduled &&
                          CampaignMailing.send === true
                        ">
                        <mat-card-content>
                          <table class="smalloverviewmailingcampaign">
                            <tr>
                              <td style="width: 10%">
                                <mat-icon *ngIf="
                                    CampaignMailing.scheduled &&
                                    CampaignMailing.send === false
                                  ">schedule
                                </mat-icon>
                                <mat-icon *ngIf="CampaignMailing.done === true">done_all</mat-icon>
                                <mat-icon *ngIf="
                                    CampaignMailing.scheduled === false &&
                                    CampaignMailing.send === false
                                  ">
                                  build</mat-icon>
                              </td>
                              <td>
                                <label>Subject: {{ CampaignMailing.subject }}</label>
                              </td>
                            </tr>
                            <tr>
                              <td style="width: 10%"></td>
                              <td>
                                <label style="font-size: 8pt">Title: {{ CampaignMailing.title }}</label>
                              </td>
                            </tr>
                            <tr>
                              <td style="width: 10%"></td>
                              <td>
                                <label style="font-size: 8pt">Date: {{ CampaignMailing.date | date }},
                                  {{ CampaignMailing.time }}</label>
                              </td>
                            </tr>
                          </table>
                        </mat-card-content>
                      </mat-card>

                      <mat-card *ngIf="toggleCampaignMailing[i]">
                        <mat-card-content>
                          <div *ngIf="CampaignMailing.send == false">
                            <table class="max-table-content">
                              <tr>
                                <td>
                                  <mat-select placeholder="Copy from:" [(value)]="copyfrommailing"
                                    [attr.disabled]="CampaignMailing.send">
                                    <mat-option *ngFor="let Mailing of Mailing" [value]="Mailing">
                                      {{ Mailing.title }}
                                      {{ Mailing.date | date: "mediumDate" }}
                                    </mat-option>
                                  </mat-select>
                                </td>
                                <td>
                                  <button a mat-raised-button (click)="copyFromMailingCampaign(i)">
                                    Copy
                                    <mat-icon>copy</mat-icon>
                                  </button>
                                </td>
                              </tr>
                              <tr>
                                <td colspan="3">
                                  <mat-form-field class="form-full-width">
                                    <input matInput [(ngModel)]="CampaignMailing.subject" placeholder="Subject"
                                      class="InputField" [attr.disabled]="CampaignMailing.send" />
                                  </mat-form-field>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <mat-form-field class="form-full-width">
                                    <input matInput [(ngModel)]="CampaignMailing.title" placeholder="Custom Titel/ID"
                                      class="InputField" [attr.disabled]="CampaignMailing.send" />
                                  </mat-form-field>
                                </td>
                                <td colspan="2">
                                  <mat-form-field class="form-full-width">
                                    <input matInput [(ngModel)]="CampaignMailing.from" placeholder="from@email.com"
                                      class="InputField" [attr.disabled]="CampaignMailing.send" />
                                  </mat-form-field>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <mat-checkbox [(ngModel)]="CampaignMailing.send"
                                    [attr.disabled]="CampaignMailing.send">
                                    Send
                                  </mat-checkbox>
                                </td>
                                <td>
                                  <mat-checkbox [(ngModel)]="CampaignMailing.toopened">
                                    Send to Previous Openend Only
                                  </mat-checkbox>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <mat-checkbox [(ngModel)]="CampaignMailing.done">
                                    Done
                                  </mat-checkbox>
                                </td>
                                <td>
                                  <mat-checkbox [(ngModel)]="CampaignMailing.toclicked">
                                    Send to Previous Clicked Only
                                  </mat-checkbox>
                                </td>
                              </tr>
                            </table>

                            <br />

                            <mat-expansion-panel class="max-expansion-panel">
                              <mat-expansion-panel-header>
                                <mat-panel-title class="mat-expansion-panel-header-title">
                                  Schedule Mailing
                                </mat-panel-title>
                                <mat-panel-description>
                                  Schedule when your mail should be send
                                  <mat-icon>schedule</mat-icon>
                                </mat-panel-description>
                              </mat-expansion-panel-header>
                              <table class="max-table-content">
                                <tr>
                                  <td>
                                    <mat-form-field>
                                      <input matInput [(ngModel)]="CampaignMailing.time" placeholder="Time"
                                        class="InputField" type="time" [attr.disabled]="CampaignMailing.send" />
                                    </mat-form-field>
                                  </td>
                                  <td>
                                    <mat-form-field>
                                      <mat-select placeholder="Timezone" [(ngModel)]="CampaignMailing.timezone"
                                        [attr.disabled]="CampaignMailing.send">
                                        <mat-option *ngFor="let timezone of timezones" [value]="timezone.value">
                                          {{ timezone.value }}
                                        </mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </td>
                                  <td>
                                    <mat-datepicker #picker2 class="form-half-width"></mat-datepicker>
                                    <input [matDatepicker]="myDatepicker2" [(ngModel)]="CampaignMailing.date"
                                      placeholder="Send Date" [attr.disabled]="CampaignMailing.send" />
                                    <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
                                    <mat-datepicker #myDatepicker2></mat-datepicker>
                                  </td>
                                </tr>
                              </table>
                            </mat-expansion-panel>
                            <br />
                            <!-- <table>
                              <tr *ngIf="CampaignMailing.done == false">
                                <label style="font-size: 8pt">%recipient_name%, %recipient.company%, %recipient%,
                                  %recipient.firstname%, %recipient.lastname%</label>
                              </tr>
                            </table> -->

                            <!-- <div *ngIf="CampaignMailing.done == false">
                              <ckeditor #content [name]="editor2" [(ngModel)]="CampaignMailing.html" [config]="{
                        extraPlugins: 'filebrowser,popup,filetools',
                          toolbarCanCollapse: 'true',
                          width: '100%',
                          height: '600px',
                          toolbarStartupExpanded: 'false'}" (fileUploadResponse)="onRequestCkEvent($event)"
                                debounce="500">
                              </ckeditor>
                            </div> -->

                            <table style="width: 100%;">
                              <tr *ngIf="CampaignMailing.done == false" rowspan="10" style="width: 100%;">
                                <td colspan="3"></td>
                              </tr>
                              <tr>
                                <button a mat-raised-button (click)="showMailPreview(i)">
                                  Preview
                                  <mat-icon>view</mat-icon>
                                </button>
                              </tr>
                              <tr>
                                <label (click)="toggleTextView()">show plain text</label>
                              </tr>
                              <tr *ngIf="
                                  CampaignMailing.done == false &&
                                  toggletextview
                                " rowspan="10">
                                <td colspan="3">
                                  <mat-form-field class="form-full-width">
                                    <textarea matInput class="content-form" #content [(ngModel)]="CampaignMailing.text"
                                      placeholder="content">
Text Version</textarea>
                                    <mat-hint align="end">{{
                                      content.value.length
                                    }}</mat-hint>
                                  </mat-form-field>
                                </td>
                              </tr>
                            </table>
                          </div>

                          <!--  -->

                          <div *ngIf="CampaignMailing.send">
                            <table class="max-table-content">
                              <tr *ngIf="toggleshorttext[i]">
                                <td colSpan="4">
                                  <br />
                                  <!-- <div class="mailpreview">{{ CampaignMailing.text | slice:0:300 }}</div> -->
                                  <br />
                                  <label (click)="toggleToFullText(i)">Show Message</label>
                                  <br />
                                </td>
                              </tr>

                              <tr *ngIf="toggleshorttext[i] === false">
                                <td colSpan="4">
                                  <br />
                                  <div class="mailpreview" [innerHTML]="htmlpreview[i]"></div>
                                  <br />
                                  <label (click)="toggleToFullText(i)">hide</label>
                                  <br />
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <label>Opened </label>
                                </td>
                                <td>
                                  <label>Clicked </label>
                                </td>
                                <td>
                                  <label>Bounced</label>
                                </td>
                                <td>
                                  <label>Unsubscribed</label>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  {{ CampaignMailing.totalopened }}
                                </td>
                                <td>
                                  {{ CampaignMailing.totalclicked }}
                                </td>
                                <td>
                                  {{ CampaignMailing.totalbounced }}
                                </td>
                                <td>
                                  {{ CampaignMailing.totalunsubscribed }}
                                </td>
                              </tr>
                            </table>

                            <mat-expansion-panel class="max-expansion-panel">
                              <mat-expansion-panel-header>
                                <mat-panel-title>
                                  Website Statistics
                                </mat-panel-title>
                                <mat-panel-description>
                                  Select your account to get Mailings website
                                  behavior
                                  <mat-icon>insert_chart</mat-icon>
                                </mat-panel-description>
                              </mat-expansion-panel-header>
                              <table class="max-table-content">
                                <tr>
                                  <td>
                                    <mat-form-field class="form-full-width">
                                      <mat-select [(ngModel)]="selectedanalytics" placeholder="GA Account"
                                        class="InputField">
                                        <mat-option *ngFor="
                                            let selectedanalytics of Googleanalytics
                                          " [value]="selectedanalytics">
                                          {{ selectedanalytics.name }}
                                        </mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </td>
                                  <td></td>
                                  <td>
                                    <button a mat-raised-button (click)="getAnalyticsCampaign(i)">
                                      Get Statistics
                                      <mat-icon>insert_chart</mat-icon>
                                    </button>
                                  </td>
                                </tr>
                                <tr>
                                  <td>
                                    <label>Average Time on Website</label>
                                  </td>
                                  <label>Average Bounce Rate</label>
                                  <td>
                                    <label>Completed Goals</label>
                                  </td>
                                  <td>
                                    <label>Page Views</label>
                                  </td>
                                </tr>
                                <tr>
                                  <td>
                                    {{ avgTimeOnPage | slice: 0:4 }} seconds
                                  </td>
                                  {{
                                    bounceRate | slice: 0:4
                                  }}
                                  %
                                  <td>{{ goalStartsAll }} goals</td>
                                  <td>{{ pageview | slice: 0:4 }} views</td>
                                </tr>
                              </table>
                            </mat-expansion-panel>
                          </div>
                          <button a mat-raised-button *ngIf="!CampaignMailing.send"
                            (click)="openDialogScheduleMailingCampaign()">
                            Schedule
                            <mat-icon>schedule</mat-icon>
                          </button>
                          <a mat-mini-fab color="primary" (click)="openDialogDeleteMailingof(i)">
                            <mat-icon>delete</mat-icon>
                          </a>
                          <a mat-mini-fab color="primary" (click)="saveMailingCampaign()">
                            <mat-icon>save</mat-icon>
                          </a>
                          <a mat-mini-fab color="primary" class="toggelcampaignwindow"
                            (click)="toggleCampaignMailingNow(i)" matTooltip="Minimalize Panel" [ngClass]="
                              togglecampaignclasstrans[i] === false
                                ? 'toggelcampaignwindowfade'
                                : 'toggelcampaignwindow'
                            ">
                            <mat-icon>aspect_ratio</mat-icon>
                          </a>
                        </mat-card-content>
                      </mat-card>

                      <!-- <button mat-mini-fab color="primary" (click)="createCampaignExtraMailing()" class="createcampaignextra">
                  <mat-icon>add</mat-icon>
                </button> -->

                      <!-- <mat-card>
                  <mat-card-content>

                  </mat-card-content>
                </mat-card> -->

                      <br />
                    </div>
                    <button mat-mini-fab color="primary" (click)="createCampaignMailing()" class="createcampaignbutton">
                      <mat-icon>add</mat-icon>
                    </button>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
          </div>

          <div fxLayout="row" fxFlexOffset="10px" class="bottomlist" *ngIf="group.value == 'maillist'">
            <div fxFlex="25%" class="relations" fxLayout="column">

              <div class="addtobutton">
                <button mat-fab color="primary" matTooltip="Upload to or create Multiple Lists"
                  (click)="createMailingList()">
                  <mat-icon>add</mat-icon>
                </button>
                <button mat-mini-fab color="primary" matTooltip="Delete selected list" (click)="deleteMailingList()"
                  (click)="togglemultiplelist()">
                  <mat-icon>delete</mat-icon>
                </button>

                <button mat-mini-fab color="primary" matTooltip="Upload to multiple lists"
                  (click)="togglemultiplelist()">
                  <mat-icon>cloud_upload</mat-icon>
                </button>
              </div>


              <mat-form-field>
                <input matInput [(ngModel)]="searchboxMailinglist" (keyup.enter)="searchGoMailingList()"
                  placeholder="Name/Category" />
              </mat-form-field>

              <button a mat-raised-button color="primary" (click)="searchGoMailingList()">
                <mat-icon>search</mat-icon>Search Result
              </button>

              <button a mat-raised-button (click)="getMailinglist()">
                Show All
              </button>

              <div class="listview">
                <div *ngFor="let Mailinglist of Mailinglist" (click)="onSelectMailingList(Mailinglist)"
                  [class.selected]="Mailinglist === selectedMailingList">
                  <span class="box" style="font-size: 8pt">
                    <tr>
                      <mat-icon color="primary">{{
                        Mailinglist.listname | slice: 0:1
                      }}</mat-icon>{{
                        Mailinglist.listname | slice: 1:22
                      }}
                      -
                    </tr>
                    <tr>
                      <strong>{{ Mailinglist.total }}</strong>
                      | Clicked:
                      {{
                        Mailinglist.totalclicked
                      }}
                      | Opened:
                      {{
                        Mailinglist.totalopened
                      }}
                    </tr>
                  </span>
                </div>
              </div>

              <div>
                <table>
                  <tr>
                    <td>
                      Total Amount of Entries:
                    </td>
                    <td>
                      {{ mailinglisttotal }}
                    </td>
                  </tr>
                  <tr>
                    <td>
                      Total Amount of Lists:
                    </td>
                    <td>
                      {{ mailinglistcount }}
                    </td>
                  </tr>

                </table>
              </div>
            </div>

            <!-- Mailing list  -->
            <div fxFlex="75%" fxLayout="column" class="relationcontainer">


              <mat-card fxFlex *ngIf="selectedMailingList">
                <mat-card-content>
                  <table class="form-full-width">
                    <tr>
                      <th>
                        <label>Edit maillist</label>
                      </th>
                    </tr>
                    <tr>
                      <td colspan="2">
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.listname" placeholder="Name"
                            style="width: 500px;" />
                        </mat-form-field>
                      </td>

                    </tr>
                    <tr>
                      <td>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.categorie" placeholder="Categorie" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.industry" placeholder="Industry/NAICS" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.geolocation" placeholder="Location" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input matInput [(ngModel)]="selectedMailingList.description" placeholder="Description" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <button a mat-raised-button color="primary" (click)="saveMailingList()">
                          Save Mailinglist
                        </button>
                      </td>
                    </tr>
                  </table>
                </mat-card-content>
              </mat-card>

              <div fxFlex class="relationcontainer" *ngIf="newmailinglisttoggle">
                <mat-card>
                  <mat-card-content>
                    <table class="form-full-width">
                      <tr>
                        <th>
                          <label>Create new maillist</label>
                        </th>
                      </tr>
                      <tr>
                        <td>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.listname" placeholder="Name"
                              class="InputField" />
                            <!-- <mat-error *ngIf="name.invalid">{{getErrorMessage()}}</mat-error> -->
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.categorie" placeholder="Categorie"
                              class="InputField" />
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.industry" placeholder="Industry/NAICS"
                              class="InputField" />
                          </mat-form-field>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.geolocation" placeholder="Location"
                              class="InputField" />
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field>
                            <input matInput [(ngModel)]="newMailinglist.description" placeholder="Description"
                              class="InputField" />
                          </mat-form-field>
                        </td>
                        <td>
                          <button a mat-raised-button (click)="createMailingList()">
                            Save Mailinglist
                          </button>
                        </td>
                      </tr>
                    </table>
                  </mat-card-content>
                </mat-card>
              </div>

              <div fxFlex class="uploadcontainer" *ngIf="toggleuploadlist">
                <div *ngIf="selectedMailingList">
                  <button mat-raised-button color="primary" (click)="showMailingList()">
                    <mat-icon>list</mat-icon> Show first entries list
                  </button>

                  <div *ngFor="
                      let mailinglistdetails of mailinglistdetails;
                      let i = index
                    ">
                    <table style="width: 100%;">
                      <tr>
                        <td class="mailinglistdetailscell">
                          {{ mailinglistdetails.vars.title }}
                          {{ mailinglistdetails.vars.firstname }}
                          {{ mailinglistdetails.vars.lastname }}
                        </td>
                        <td class="mailinglistdetailscell">
                          {{ mailinglistdetails.address }}
                        </td>
                        <td class="mailinglistdetailscell">
                          {{ mailinglistdetails.vars.company }}
                        </td>
                        <td style="color: blue;" class="mailinglistdetailscell" (click)="openmailinglistwebsite(i)">
                          {{ mailinglistdetails.vars.website }}
                          <!-- <mat-icon *ngIf="mailinglistdetails.vars.website" (click)="openmailinglistwebsite(i)">
                            open_in_new</mat-icon> -->
                        </td>
                        <td class="mailinglistdetailscell">
                          <mat-icon color="primary" (click)="
                              deleteOneMailingList(mailinglistdetails.address)
                            ">
                            delete</mat-icon>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>

                <mat-card *ngIf="selectedMailingList">
                  <mat-card-content>
                    <label>Upload new addresses </label>
                    <br />
                    Check the following first:
                    <li>list is XLSX/XLS/CSV format</li>
                    <li>
                      Table starts with columns: address, company, firstname,
                      lastname, title
                    </li>
                    <div *ngIf="selectedMailingList">
                      <br />
                      Upload to:
                      <label>{{ selectedMailingList.listname }}</label>
                    </div>
                    <tr>
                      <td>
                        <mat-form-field>
                          <input matInput [(ngModel)]="oneaddress" placeholder="Input Address" class="InputField" />
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput [(ngModel)]="title" placeholder="Title" class="InputField" />
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput [(ngModel)]="firstname" placeholder="Firstname" class="InputField" />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <input matInput [(ngModel)]="lastname" placeholder="Lastname" class="InputField" />
                        </mat-form-field>
                        <mat-form-field>
                          <input matInput [(ngModel)]="company" placeholder="Company" class="InputField" />
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <button a mat-raised-button (click)="deleteOneMailingList()" color="primary">
                        Delete Address
                      </button>
                      <button a mat-raised-button (click)="addOneMailingList()" color="primary">
                        Add Address
                      </button>
                    </tr>
                  </mat-card-content>
                </mat-card>
                <br />
                <mat-card>
                  <mat-card-content>
                    <tr>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Select Email" [(ngModel)]="emailheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td class="importantClassTable">
                        <mat-form-field>
                          <mat-select placeholder="Select Mailinglist (if applicable)" [(ngModel)]="mailinglistheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Select First Name" [(ngModel)]="firstnameheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Select Last Name" [(ngModel)]="lastnameheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Select Website" [(ngModel)]="websiteheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Select Title" [(ngModel)]="titleheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Select Company" [(ngModel)]="companyheader">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var1header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var2header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var3header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <mat-form-field>
                          <mat-select placeholder="Add additional info" [(ngModel)]="var4header">
                            <mat-option *ngFor="let header of headers" [value]="header">
                              {{ header }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-slide-toggle [(ngModel)]="createnewmailinglistonfield">Create new Mailinglist based on
                          Mailinglist
                          field</mat-slide-toggle>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <button a mat-stroked-button (click)="runImportMailingList()">
                          Upload to Mailinglist
                        </button>
                      </td>
                      <td>
                        <button a mat-stroked-button (click)="runImportDeleteListMember()">
                          Find and Delete from List
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <button a mat-stroked-button (click)="checkListOrCreate()">
                          Verify List and Upload
                        </button>
                      </td>
                      <td>
                        <button a mat-stroked-button (click)="getEmailAddresses()">
                          Get Emails based on Name
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <!-- <button a mat-stroked-button (click)="findEmailAdresses()">Find Email and Upload</button> -->
                      </td>
                    </tr>
                    <tr></tr>
                    <tr>
                      <td colspan="2">
                        <div>
                          <h3>Upload small file (less then 500 entries)</h3>
                          <xlsx-file-upload (uploadedXls)="xlsxUploaded($event)">
                            <div class="drop-zone" [ngClass]="{
                                'drop-zone-over': hasBaseDropZoneOver
                              }">
                              {{ uploaderContent | async }}
                            </div>
                          </xlsx-file-upload>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <input type="file" style="display: inline-block;" (change)="xlsxUploaded($event)"
                          placeholder="Upload file" accept=".xlsx" />
                        <!-- <button type="button" class="btn btn-info" (click)="Upload()">Upload</button> -->
                      </td>
                    </tr>
                    <tr>
                      <td colspan="2">
                        <div>
                          <h3>Upload large list</h3>
                          <div style="background-color:beige">
                            <table>
                              <tr>
                                <label>Please use standard xlsx format with the following header:</label>
                              </tr>
                              <tr>
                                <label>company, firstname, lastname, title, website, mailing</label>
                              </tr>
                            </table>
                          </div>
                          <div ng2FileDrop [ngClass]="{ 'drop-zone-over': hasBaseDropZoneOver }"
                            (fileOver)="fileOverAnother($event)" [uploader]="uploader" class="drop-zone">
                            Drop Zone
                          </div>

                          <input type="file" ng2FileSelect [uploader]="uploader" />
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td colspan="2">
                        <div class="righ-upload-block">
                          <table>
                            <thead>
                              <tr>
                                <th width="50%">Name</th>
                                <!-- <th>Size</th> -->
                                <th>Progress</th>
                                <th>Status</th>
                                <th>Actions</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of uploader.queue">
                                <td>
                                  <strong>{{ item?.file?.name }}</strong>
                                </td>
                                <!-- <td *ngIf="uploader.isHTML5" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB
                                </td> -->
                                <td *ngIf="uploader.isHTML5">
                                  <div style="margin-bottom: 0;">
                                    <mat-progress-bar [color]="primary" [mode]="determinate" [value]="item.progress">
                                    </mat-progress-bar>
                                  </div>
                                </td>

                                <td>
                                  <span *ngIf="item.isSuccess">
                                    <mat-icon>done</mat-icon>
                                  </span>
                                  <span *ngIf="item.isCancel">
                                    <mat-icon>cancel</mat-icon>
                                  </span>
                                  <span *ngIf="item.isError">
                                    <mat-icon>remove_circle</mat-icon>
                                  </span>
                                </td>
                                <td nowrap>
                                  <button mat-button (click)="setupload(item?.file?.name)"
                                    [disabled]="item.isReady || item.isUploading || item.isSuccess">
                                    <mat-icon>file_upload</mat-icon>Upload
                                  </button>
                                  <button mat-button (click)="item.cancel()" [disabled]="!item.isUploading">
                                    <mat-icon>cancel</mat-icon> Cancel
                                  </button>
                                  <button mat-button (click)="item.remove()">
                                    <mat-icon>remove_circle</mat-icon> Remove
                                  </button>
                                </td>
                              </tr>
                            </tbody>
                          </table>

                          <div>
                            <div>
                              Queue progress:
                              <div class="progress">
                                <div>
                                  <mat-progress-bar color="primary" mode="determinate" [value]="uploader.progress">
                                  </mat-progress-bar>
                                </div>
                              </div>
                            </div>
                          </div>
                          <br>
                          <button mat-button (click)="uploadFilelarge()" [disabled]="!newFiles.url">Start
                            Import</button>
                        </div>
                      </td>
                    </tr>
                  </mat-card-content>
                </mat-card>
              </div>
            </div>
          </div>

          <div style="width: 100%;" *ngIf="group.value == 'maileditor'">
            <app-maileditor #maileditor style="width: 100%;" [account]="Account" [option]="option"
              [updateMailingObj]="updateMailingObj" [company]="company">
            </app-maileditor>
          </div>
        </div>
      </div>
    </mat-tab>

    <!-- Channels/Social Media _______________________________ -->

    <mat-tab label="Channels/Social Media">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon>mode_comment</mat-icon>
        <div fxShow.xs="false">Channels/Social Media</div>
      </ng-template>

      <app-marketingchannels [Account]="Account" [SelectedRelation]="SelectedRelation" [option]="option">
      </app-marketingchannels>
    </mat-tab>

    <!-- Promotions_______________________________ -->

    <mat-tab label="Promotions">
      <ng-template mat-tab-label class="mat-tab-labels">
        <mat-icon (click)="getAdwords()">add_shopping_cart</mat-icon>
        <div fxShow.xs="false">Promotions</div>
      </ng-template>

      <app-marketingpromotions [Account]="Account" [SelectedRelation]="SelectedRelation" [option]="option">
        </app-marketingpromotions>

    </mat-tab>
  </mat-tab-group>
</div>